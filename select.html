
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Rio Center - Estoure e Ganhe</title>
    <meta name="description" content="Composite â€” A-Frame">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.7.1/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://andrewmc1994.github.io/Image-Link-Test/js/aframe-ui-modal-component.js"></script>
    <script src="https://andrewmc1994.github.io/Image-Link-Test/js/aframe-src-fit-component.js"></script>
    <script src="https://harlyq.github.io/aframe-randomize-component/aframe-randomize-component.js"></script>
</head>

<body>

    <a-scene background="color: #ff4700" loading-screen="dotsColor: red; backgroundColor: black">
        
        <!-- CURSOR ENTITY -->
        <a-entity rotation="0 0 0" position="0 0 2">
            <a-entity id="camera" far: 20; camera look-controls rotation="0 0 0" wasd-controls>
                <!-- MAIN CURSOR -->
                <a-entity raycaster="objects: .clickable" cursor="fuse: true; maxDistance: 500; timeout: 1500;" id="cursor-main" position="0 0 -1.5" geometry="primitive: ring; radiusOuter: 0.04; radiusInner: 0.03; thetaLength: 360; thetaStart: 90;" material="color: #439DC2;">
                    <a-animation begin="cursor-fusing" attribute="geometry.thetaLength" fill="forwards" from="360" to="0" easing="ease-in"></a-animation>
                    <a-animation begin="mouseleave" attribute="geometry.thetaLength" fill="backwards" from="0" to="360" dur="0"></a-animation>
                </a-entity>
                <a-entity id="cursor-loader" position="0 0 -1.51" geometry="primitive: ring; radiusOuter: 0.04; radiusInner: 0.03;" material="color: #2ADD2A;">
                </a-entity>
            </a-entity>
        </a-entity>

        <a-assets>
            <img id="360" crossorigin="anonymous" src="images/images.png">
            <img id="menu" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/navigation/menubar.png">
            <img id="submenu" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/navigation/submenubar.png">
            <img id="location" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/navigation/location-icon.png">
            <img id="3d" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/navigation/3d-icon.png">
            <img id="information" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/navigation/information-icon.png">
            <img id="home" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/navigation/home-icon.png">
            <img id="tqicon" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/img/icon1.png">
            <img id="bchicon" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/img/icon2.png">
            <img id="acicon" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/img/icon3.png">
            <img id="info" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/img/info.png">
            <img id="3d1" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/img/icon3d1.png">
            <img id="3d2" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/img/icon3d2.png">
            <img id="3d3" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/img/icon3d3.png">
            <img id="close" crossorigin="anonymous" src="https://andrewmc1994.github.io/Image-Link-Test/navigation/close.png">
            
            <img id="keyboard" crossorigin="anonymous" src="images/home-keyboard.png">
            <img id="help" crossorigin="anonymous" src="images/home-help.png">
            <img id="percento" crossorigin="anonymous" src="images/home-percento.png">
            <img id="cupom" crossorigin="anonymous" src="images/area-cupom.png">
            <img id="logo" crossorigin="anonymous" src="selo_promo.png">
            

        </a-assets>

        <a-image src="#logo" position="0.071 3.719 -5" material="height:251.17" scale="4.894 2.634 1.558"></a-image>

        <a-entity id="popup" ui-modal="triggerElement:#infobox;" visible="false">
            <a-image src="#submenu" scale="3.5 3.5 0" position="0 -0.25 2" src-fit></a-image>
            <!--
            <a-image position="-1 -0.25 2.1" class="clickable" src="#tqicon" scale="0.7 0.7 0" link="href:location1.html; on: click; visualAspectEnabled: false" src-fit></a-image>
            <a-image position="0 -0.25 2.1" class="clickable" src="#acicon" scale="0.7 0.7 0" link="href:location3.html; on: click; visualAspectEnabled: false" src-fit></a-image>
            <a-image position="1 -0.25 2.1" class="clickable" src="#bchicon" scale="0.7 0.7 0" link="href:location2.html; on: click; visualAspectEnabled: false" src-fit></a-image>
            <a-image position="1.2 0 2.1" class="clickable" src="#close" scale="0.1 0.1 0" id="close" src-fit></a-image>
            -->
        </a-entity>


        <a-sky src="#360"></a-sky>

        <a-image src="#menu" width="3" scale="3 3 0" position="0 -0.29 -1" src-fit></a-image>
        
        <a-image class="clickable" src="#home" scale="0.3 0.3 0" position="-1 -0.35 -0.9" link="href:index.html; on: click; visualAspectEnabled: false" src-fit></a-image>
        <a-image id="selection" class="clickable" src="#keyboard" scale="0.3 0.3 0" position="-0.5 -0.35 -0.9" link="href:index.html; on: click; visualAspectEnabled: false" src-fit></a-image>
        <a-image id="infobox" class="clickable" src="#percento" scale="0.3 0.3 0" position="0.5 -0.35 -0.9" src-fit></a-image>
        <a-image id="test" class="clickable" src="#help" scale="0.3 0.3 0" position="1 -0.35 -0.9" src-fit></a-image>

    </a-scene>

  
    <script>


$( document ).ready(function() {
      var popup = document.querySelector('#popup');
      //verificar o codigo informado
      var queryDict = {}
      location.search.substr(1).split("&").forEach(function(item) {queryDict[item.split("=")[0]] = item.split("=")[1]})
      qtd_repeat = queryDict.cod;


      //fazer um preload nesse estilo -> https://tobiasahlin.com/spinkit/

      //verificar a lista de notas  (mostrar na tela para ele escolher)
      //http://localhost:8000/php/service.php?cod=promocenterrio&op=21&cliente=166
      $.get("http://localhost:8000/php/service.php?cod=promocenterrio&op=21&cliente=166", function(data, status){
        
        lista = JSON.parse(data)
        console.log(lista);


        var x = -1.22;
        for (let index = 0; index < lista.length; index++) {
            
            const element = lista[index];
            console.log(element.idnota_fiscal)
            var item = document.createElement('a-image');
            item.setAttribute('id',element.idnota_fiscal);
            item.setAttribute('position', x + " -0.251 2.02");
            item.setAttribute('class', "clickable");
            item.setAttribute('src', "#cupom");
            item.setAttribute('scale', "0.7 0.7 0");
            item.setAttribute('link', "href:game.html?cupom="+element.idnota_fiscal+"; on: click; visualAspectEnabled: false");
            item.setAttribute('src-fit','');
            popup.appendChild(item);
            
            x = x - (x * 0.55);
        }    
        
      });
});

    
    var ModalEffects = (function() {

    function init() {
        // let closeBtn = document.getElementById("close")
        // closeBtn.addEventListener(this.data.trigger, e => {
        //     this.el.setAttribute("visible", "false")
        // })

        // var overlay = document.querySelector( 'ui-modal' );

        // [].slice.call( document.querySelectorAll( '#selection' ) ).forEach( function( el, i ) {

        //     var modal = document.querySelector( '#' + el.getAttribute( 'data-modal' ) ),
        //         close = modal.querySelector( '#close' );

        //     function removeModal( hasPerspective ) {
        //         classie.remove( modal, 'md-show' );

        //         if( hasPerspective ) {
        //             classie.remove( document.documentElement, 'md-perspective' );
        //         }
        //     }

        //     function removeModalHandler() {
        //         removeModal( classie.has( el, 'md-setperspective' ) ); 
        //     }

        //     el.addEventListener( 'click', function( ev ) {
        //         classie.add( modal, 'md-show' );
        //         overlay.removeEventListener( 'click', removeModalHandler );
        //         overlay.addEventListener( 'click', removeModalHandler );

        //         if( classie.has( el, 'md-setperspective' ) ) {
        //             setTimeout( function() {
        //                 classie.add( document.documentElement, 'md-perspective' );
        //             }, 25 );
        //         }
        //     });

        //     close.addEventListener( 'click', function( ev ) {
        //         ev.stopPropagation();
        //         removeModalHandler();
        //     });

        // } );

    }

    init();

})();
    
    </script>
    
</body>

</html>